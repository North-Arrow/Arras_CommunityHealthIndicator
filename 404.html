<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arras Community Indicator Tool</title>
  </head>
  <body>
    <script>
      // GitHub Pages SPA fallback that supports BOTH:
      // - /...      (main on custom domain root)
      // - /dev/...  (dev on custom domain subpath)
      //
      // Redirects missing routes to the appropriate base with a `?/` encoded path,
      // which `index.html` decodes on load.
      (function () {
        var l = window.location;
        var parts = l.pathname.split('/').filter(Boolean); // [(dev), ...rest]
        var isDev = parts[0] === 'dev';
        var keep = isDev ? 1 : 0;
        var base = isDev ? '/dev/' : '/';

        var rest = parts.slice(keep).join('/');
        // Encode & in path only, not in query string
        var encodedRest = rest.replace(/&/g, '~and~');
        
        // Keep query string as-is (with & separators), just remove leading ?
        var search = l.search ? l.search.slice(1) : '';
        var hash = l.hash || '';

        // Format: ?/path&query (query params separated by &, not encoded)
        l.replace(base + '?/' + encodedRest + (search ? '&' + search : '') + hash);
      })();
    </script>
  </body>
</html>

