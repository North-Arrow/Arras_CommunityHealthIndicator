import{H as b,b1 as m,f5 as I,cl as g}from"./MapPage-tXYKzu0N.js";import"./mat4-C8ftgpYK.js";import"./vec32-DVvShqlU.js";import"./projectionUtils-Dt117gLL.js";import"./projectVectorToVector-S0it4k5n.js";import"./sphere-CBCaEFcR.js";import"./Query-Dj5ArBen.js";import{S as x,v as E}from"./I3SBinaryReader-CYNbIhMy.js";import{r as T}from"./vec4f64-CvoGn1-Y.js";import{G as $}from"./orientedBoundingBox-DeexTywe.js";import"./glsl-B5bJgrnA.js";function F(e){return{...k,...e,type:0}}const k={color:T(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:1,hasSlicePlane:!1};m();async function R(e,n,a,f,s,p,l,d){const i=[];for(const t of n)if(t&&s.includes(t.name)){const r=`${e}/nodes/${a}/attributes/${t.key}/0`;i.push({url:r,storageInfo:t})}const o=await Promise.allSettled(i.map(t=>b(t.url,{responseType:"array-buffer",query:{...l,token:p},signal:d?.signal}).then(r=>x(t.storageInfo,r.data)))),u=[];for(const t of f){const r={};for(let c=0;c<o.length;c++){const h=o[c];if(h.status==="fulfilled"){const y=h.value;r[i[c].storageInfo.name]=E(y,t)}}u.push(r)}return u}F({color:[0,0,0,0],opacity:0});m();m();new $;new Array(72);async function U(e,n=e.popupTemplate){if(n==null)return[];const a=await n.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:f}=n,{objectIdField:s,typeIdField:p,globalIdField:l,relationships:d}=e;if(a.includes("*"))return["*"];const i=f?I(e):[],o=g(e.fieldsIndex,[...a,...i]);return p&&o.push(p),o&&s&&e.fieldsIndex?.has(s)&&!o.includes(s)&&o.push(s),o&&l&&e.fieldsIndex?.has(l)&&!o.includes(l)&&o.push(l),d?.forEach(u=>{const{keyField:t}=u;o&&t&&e.fieldsIndex?.has(t)&&!o.includes(t)&&o.push(t)}),o}function B(e,n){return e&&typeof e=="object"?n?.checkPopupEnabled&&"popupEnabled"in e&&!e.popupEnabled?null:"popupTemplate"in e&&e.popupTemplate?e.popupTemplate:null:null}export{R as $,B as n,U as p};
