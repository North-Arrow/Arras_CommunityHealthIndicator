const z=` /-,
`;function h(t){let r=t.length;for(;r--;)if(!z.includes(t.charAt(r)))return!1;return!0}function B(t,r){const o=[];let e=0,n=-1;do if(n=t.indexOf("[",e),n>=e){if(n>e){const l=t.slice(e,n);o.push([l,null,h(l)])}if(e=n+1,n=t.indexOf("]",e),n>=e){if(n>e){const l=r[t.slice(e,n)];l&&o.push([null,l,!1])}e=n+1}}while(n!==-1);if(e<t.length){const l=t.slice(e);o.push([l,null,h(l)])}return o}function X(t,r,o){let e="",n=null;for(const l of r){const[s,u,a]=l;if(s!=null&&s!=="")a?n=s:(n!=null&&(e+=n,n=null),e+=s);else{const i=t.readAttribute(u);i!=null&&i!==""&&(n!==null&&(e+=n,n=null),e+=i)}}return d(e,o)}function Y(t,r,o,e){let n="",l=null;for(const s of r){const[u,a,i]=s;if(u!=null&&u!=="")i?l=u:(l!=null&&(n+=l,l=null),n+=u);else{let f=a;o!=null&&(f=V(a,o));const c=t.attributes[f];c!=null&&c!==""&&(l!=null&&(n+=l,l=null),n+=c)}}return d(n,e)}function d(t,r){switch(typeof t!="string"&&(t=String(t)),r){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function j(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function D(t){return t.data?.symbol??null}function F(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function G(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function H(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const R=(t,r=0)=>t==null||isNaN(t)?r:t;class T{constructor(r){this._import=r}getImportPromise(){return this._promise==null&&(this._promise=this._import().then(r=>this.module=r)),this._promise}}function U(t){return new T(t)}function W(t){return(t?Object.keys(t):[]).map(r=>({name:r,alias:r,type:typeof t[r]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}function b(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function q(t,r,o,e,n,l,s=!0){const{infos:u}=l;let a=1,i=0,f=0,c=0,p=1;for(const{absoluteAnchorPoint:A,offsetX:m,offsetY:M,rotation:N,size:L,frameHeight:y,rotateClockWise:w,scaleSymbolsProportionally:x}of u)p=A?1:a,f=k(m,M,i,p,f),c=I(m,M,i,p,c),y&&(x||s)&&(a*=L/y),i=P(N,w,i);const S=k(e,n,i,p,f),g=I(e,n,i,p,c);return{size:t*a,rotation:P(r,o,i),offsetX:S,offsetY:g}}function _(t){return t.split(" ").map(r=>Number(r))}function O(t){return typeof t=="string"?_(t):t}function E(t){return t?.dashTemplate&&(t.dashTemplate=O(t.dashTemplate)),t}function C(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const r=t.symbolLayers;if(!r)return"Normal";for(const o of r)if(o.type==="CIMVectorMarker")return C(o)}break;case"CIMVectorMarker":{const r=t.markerGraphics;if(!r)return"Normal";for(const o of r)if(o.symbol)return C(o.symbol)}}return"Normal"}function V(t,r){if(r!==null){const o=r.get(t);return o?o.name:t}return t}function J(t){return t.map(r=>({...r,propertyName:b(r.propertyName)}))}function K(t){const r={};for(const o in t){const e=t[o];r[b(o)]=e}return r}function I(t,r,o,e,n){const l=o*Math.PI/180;if(l){const s=Math.cos(l);return(Math.sin(l)*t+s*r)*e+n}return r*e+n}function k(t,r,o,e,n){const l=o*Math.PI/180;return l?(Math.cos(l)*t-Math.sin(l)*r)*e+n:t*e+n}function P(t,r,o){return r?o-t:o+t}export{E as B,G as C,b as D,C as H,R as I,j as M,U as P,J as X,K as Y,B as a,Y as c,H as h,F as m,q,X as s,D as y,W as z};
