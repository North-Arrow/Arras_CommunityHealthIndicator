import{bG as s,bH as l,bI as d,bJ as m,bK as N}from"./MapPage-BqDFg4OT.js";function F(r,n){return{...n,filterMode:r.mode}}function p(r,n,t){const e=S(r);if(e&&(s(n,e[0])||l(t,e[1])))return"";const a=Array.from(b(r,n,t)),u=x(a,n,t)?"1=1":a.map(i=>i.where||"1=1").reduce((i,o)=>d(i,o),"");return u&&u!=="1=1"?u:""}function S(r){if(I(r)==="manual")return null;const n=[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY];for(const{minScale:t,maxScale:e}of r.filters)n[0]=Math.max(n[0],c(t)),n[1]=Math.min(n[1],f(e));return n}function*b(r,n,t){if(I(r)==="manual"){const e=r.filters.find(a=>a.id===r.activeFilterId);e&&(yield e)}else{typeof n=="object"&&(n=n.scale);for(const e of r.filters)T(e.minScale,e.maxScale,n,t)&&(yield e)}}function x(r,n,t){if(r.length===0)return!0;const e=c(r.at(0)?.minScale),a=f(r.at(-1)?.maxScale);if(l(e,n)||s(a,t))return!0;for(let u=0;u<r.length-1;u++){const i=r[u],o=r[u+1];if(l(c(o.minScale),f(i.maxScale)))return!0}return!1}function T(r,n,t,e){return r=c(r),t=c(t),n=f(n),!(!m(t,r)&&(e??t)>r)&&!N(n,t)&&(e===void 0||!m(e,r))}function I(r){return"mode"in r?r.mode:r.filterMode}function c(r){return r||Number.POSITIVE_INFINITY}function f(r){return r||0}export{p as c,F as i};
