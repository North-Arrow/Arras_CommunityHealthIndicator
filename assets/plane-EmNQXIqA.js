import{aZ as m,b8 as F}from"./MapPage-ILsU69jC.js";import{P as s,u as C,g as v,_ as G,c as p,H as P,A as B}from"./vec32-BULJBFmW.js";import"./vec42-Lx4jM55-.js";import{r as H,c as $}from"./vectorStacks-CoB3r4m2.js";function D(n=g){return[n[0],n[1],n[2],n[3]]}function _(n=g[0],t=g[1],r=g[2],u=g[3]){return E(n,t,r,u,H.get())}function I(n,t){return E(t[0],t[1],t[2],t[3],n)}function z(n){return n}function E(n,t,r,u,e=D()){return e[0]=n,e[1]=t,e[2]=r,e[3]=u,e}function K(n,t,r){const u=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],e=Math.abs(u-1)>1e-5&&u>1e-12?1/Math.sqrt(u):1;return r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=-(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]),r}function L(n,t,r,u=D()){const e=r[0]-t[0],o=r[1]-t[1],c=r[2]-t[2],i=n[0]-t[0],k=n[1]-t[1],w=n[2]-t[2],b=o*w-c*k,d=c*i-e*w,q=e*k-o*i,y=b*b+d*d+q*q,A=Math.abs(y-1)>1e-5&&y>1e-12?1/Math.sqrt(y):1;return u[0]=b*A,u[1]=d*A,u[2]=q*A,u[3]=-(u[0]*n[0]+u[1]*n[1]+u[2]*n[2]),u}function N(n,t,r,u=0,e=Math.floor(r*(1/3)),o=Math.floor(r*(2/3))){if(r<3)return!1;t(l,u);let c=e,i=!1;for(;c<r-1&&!i;)t(a,c),c++,i=!P(l,a);if(!i)return!1;for(c=Math.max(c,o),i=!1;c<r&&!i;)t(f,c),c++,p(h,l,a),B(h,h),p(M,a,f),B(M,M),i=!P(l,f)&&!P(a,f)&&Math.abs(s(h,M))<O;return i?(L(l,a,f,n),!0):(u!==0||e!==1||o!==2)&&N(n,t,r,0,1,2)}const O=.99619469809,l=m(),a=m(),f=m(),h=m(),M=m();function J(n,t,r){return t!==n&&I(n,t),n[3]=-s(n,r),n}function Q(n,t,r,u){return G(f,t,n),K(r,f,u)}function T(n,t,r){return t!=null&&Z(j(n,t.origin,t.direction,S,r))}function W(n,t,r){return Z(j(n,t.origin,t.vector,0,r))}function tt(n,t,r){return Z(j(n,t.origin,t.vector,1,r))}function nt(n,t){return x(n,t)>=0}function rt(n,t){const r=s(n,t.ray.direction),u=-x(n,t.ray.origin);if(u<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return u>0;if((u<0||r<0)&&!(u<0&&r<0))return!0;const e=u/r;return r>0?e<t.c1&&(t.c1=e):e>t.c0&&(t.c0=e),t.c0<=t.c1}function ut(n,t,r){const u=v($.get(),n,-n[3]),e=R(n,p($.get(),t,u),$.get());return C(r,e,u),r}function R(n,t,r){const u=v($.get(),n,s(n,t));return p(r,t,u),r}function x(n,t){return s(n,t)+n[3]}function Z(n){return n===0||n===1}function j(n,t,r,u,e){const o=s(n,r),c=x(n,t);if(o===0)return c>=0?2:3;let i=-c/o;return 1&u&&(i=F(i,0,1)),!(4&u)&&i<0||!(8&u)&&i>1?c>=0?2:3:(C(e,t,v(e,r,i)),c>=0?0:1)}const g=[0,0,1,0],S=8;export{J as G,Q as I,T as K,W as L,tt as N,nt as O,rt as P,ut as R,N as S,K as U,x as X,j as Z,_ as d,D as j,z as k,E as q,L as w,I as y};
