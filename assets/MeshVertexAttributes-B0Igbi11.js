import{ci as b,B as w,U as s,g as y,_ as n,z as u,dc as g,A as $}from"./MapPage-ILsU69jC.js";const m=Symbol("meshContext");function F(t){return t&&typeof t=="object"&&m in t?t[m]:void 0}function j(t,o){const r=F(t);return{...t,[m]:{...r,...o}}}const f=Symbol("meshMaterialContext");function x(t){return t&&typeof t=="object"&&f in t?t[f]:void 0}function C(t){if(x(t)?.materialMap)return t;const r={materialMap:new Map};return{...t,[f]:r}}const d=Symbol("meshTextureContext");function L(t){return t&&typeof t=="object"&&d in t?t[d]:void 0}function U(t){if(L(t)?.textureMap)return t;const r={textureMap:new Map};return{...t,[d]:r}}function h(t,o,r,l){const{loggerTag:a,stride:i}=o;return t.length%i!==0?(l.error(a,`Invalid array length, expected a multiple of ${i}`),new r([])):t}function c(t,o,r,l,a){if(!t)return t;if(t instanceof o)return h(t,l,o,a);for(const i of r)if(t instanceof i)return h(new o(t),l,o,a);if(Array.isArray(t))return h(new o(t),l,o,a);{const i=r.map(A=>`'${A.name}'`);return a.error(`Failed to set property, expected one of ${i}, but got ${t.constructor.name}`),new o([])}}function p(t,o,r){o[r]=M(t)}function M(t){const o=new Array(t.length);for(let r=0;r<t.length;r++)o[r]=t[r];return o}var v;let e=v=class extends b(w){constructor(t){super(t),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(t){return c(t,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},s.getLogger(this))}castPosition(t){return t&&t instanceof Float32Array&&s.getLogger(this).warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),c(t,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},s.getLogger(this))}castUv(t){return c(t,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},s.getLogger(this))}castNormal(t){return c(t,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},s.getLogger(this))}castTangent(t){return c(t,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},s.getLogger(this))}clonePositional(){const t={position:y(this.position),normal:y(this.normal),tangent:y(this.tangent),uv:this.uv,color:this.color};return new v(t)}get usedMemory(){return this.position.byteLength+(this.uv?.byteLength??0)+(this.normal?.byteLength??0)+(this.tangent?.byteLength??0)+(this.color?.byteLength??0)}};n([u({json:{write:p}})],e.prototype,"color",void 0),n([g("color")],e.prototype,"castColor",null),n([u({nonNullable:!0,json:{write:p}})],e.prototype,"position",void 0),n([g("position")],e.prototype,"castPosition",null),n([u({json:{write:p}})],e.prototype,"uv",void 0),n([g("uv")],e.prototype,"castUv",null),n([u({json:{write:p}})],e.prototype,"normal",void 0),n([g("normal")],e.prototype,"castNormal",null),n([u({json:{write:p}})],e.prototype,"tangent",void 0),n([g("tangent")],e.prototype,"castTangent",null),e=v=n([$("esri.geometry.support.MeshVertexAttributes")],e);export{U as a,p as b,e as c,C as d,j as e,F as f,c as n,x as r,L as u};
